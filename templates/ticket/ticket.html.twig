{% extends 'layouts/layout_authenticated.html.twig' %}

{% block title %}{{ ticket.title }} - Debug.me{% endblock %}

{% block content %}
<main class="ticket-page">
    <div class="card left">
        <div class="card-header">
            {% if ticket.isDone %}
                <span class="ticket__status ticket__status--done">
                    <i class="fa-solid fa-check"></i>
                </span>
            {% else %}
                <span class="ticket__status ticket__status--undone">
                    <i class="fa-solid fa-question"></i>
                </span>
            {% endif %}
            <h1 class="ticket__title">{{ ticket.title }}</h1>
        </div>
        {% if ticket.tags | length %}
            <ul class="ticket-tags">
                {% for tag in ticket.tags %}
                    <li class="chip">{{tag.name}}</li>
                {% endfor %}
            </ul>
        {% endif %}
        <p class="ticket__content">{{ ticket.content }}</p>
        <div class="ticket-comments">
            <div class="ticket-comments-header">
                <h3 class="ticket-comments-header__title">Réponses</h3>
                <span class="chip chip--active">{{ comments | length }}</span>
            </div>
            {% if comments | length %}
            <ul class="ticket-comments-list">
                {% for comment in comments %}
                    <li class="card ticket-comment">
                        {{ dump(comment) }}
                        <p class="ticket-comment__content">{{ comment.content }}</p>
                    </li>
                {% endfor %}
            </ul>
            {% endif %}
        </div>
    </div>
    <div class="card right">
        <ul class="ticket-list">
            <li class="ticket-list__item">
                <h2>Date de création</h2>
                {{ ticket.createdAt | date("d M Y") }}
            </li>
            <li class="ticket-list__item">
                <h2>Ticket crée par</h2>
                <div class="ticket-profile">
                    <img class="ticket-profile__picture" src="{{ asset('/images/profile-picture.png')}}"/>
                    {{ ticket.author.firstname }}
                    {{ ticket.author.lastname }}
                </div>
            </li>
            <li class="ticket-list__item">
                <h2>Status</h2>
                {% if ticket.isDone %}
                    <span class="chip chip--active">
                        Résolu
                    </span>
                {% else %}
                    <span class="chip">
                        En cours
                    </span>
                {% endif %}
            </li>
        </ul>
        <span class="card__divider"></span>
        <button class="button">Ajouter une réponse</button>
    </div>
</main>
{% endblock %}
